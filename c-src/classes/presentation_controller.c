/* presentation_controller.c generated by valac 0.16.0, the Vala compiler
 * generated from presentation_controller.vala, do not modify */


#include <glib.h>
#include <glib-object.h>
#include <gtk/gtk.h>
#include <gdk/gdk.h>
#include <string.h>


#define ORG_WESTHOFFSWELT_PDFPRESENTER_TYPE_PRESENTATION_CONTROLLER (org_westhoffswelt_pdfpresenter_presentation_controller_get_type ())
#define ORG_WESTHOFFSWELT_PDFPRESENTER_PRESENTATION_CONTROLLER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), ORG_WESTHOFFSWELT_PDFPRESENTER_TYPE_PRESENTATION_CONTROLLER, orgwesthoffsweltpdfpresenterPresentationController))
#define ORG_WESTHOFFSWELT_PDFPRESENTER_PRESENTATION_CONTROLLER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), ORG_WESTHOFFSWELT_PDFPRESENTER_TYPE_PRESENTATION_CONTROLLER, orgwesthoffsweltpdfpresenterPresentationControllerClass))
#define ORG_WESTHOFFSWELT_PDFPRESENTER_IS_PRESENTATION_CONTROLLER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), ORG_WESTHOFFSWELT_PDFPRESENTER_TYPE_PRESENTATION_CONTROLLER))
#define ORG_WESTHOFFSWELT_PDFPRESENTER_IS_PRESENTATION_CONTROLLER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), ORG_WESTHOFFSWELT_PDFPRESENTER_TYPE_PRESENTATION_CONTROLLER))
#define ORG_WESTHOFFSWELT_PDFPRESENTER_PRESENTATION_CONTROLLER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), ORG_WESTHOFFSWELT_PDFPRESENTER_TYPE_PRESENTATION_CONTROLLER, orgwesthoffsweltpdfpresenterPresentationControllerClass))

typedef struct _orgwesthoffsweltpdfpresenterPresentationController orgwesthoffsweltpdfpresenterPresentationController;
typedef struct _orgwesthoffsweltpdfpresenterPresentationControllerClass orgwesthoffsweltpdfpresenterPresentationControllerClass;
typedef struct _orgwesthoffsweltpdfpresenterPresentationControllerPrivate orgwesthoffsweltpdfpresenterPresentationControllerPrivate;

#define ORG_WESTHOFFSWELT_PDFPRESENTER_TYPE_CONTROLLABLE (org_westhoffswelt_pdfpresenter_controllable_get_type ())
#define ORG_WESTHOFFSWELT_PDFPRESENTER_CONTROLLABLE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), ORG_WESTHOFFSWELT_PDFPRESENTER_TYPE_CONTROLLABLE, orgwesthoffsweltpdfpresenterControllable))
#define ORG_WESTHOFFSWELT_PDFPRESENTER_IS_CONTROLLABLE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), ORG_WESTHOFFSWELT_PDFPRESENTER_TYPE_CONTROLLABLE))
#define ORG_WESTHOFFSWELT_PDFPRESENTER_CONTROLLABLE_GET_INTERFACE(obj) (G_TYPE_INSTANCE_GET_INTERFACE ((obj), ORG_WESTHOFFSWELT_PDFPRESENTER_TYPE_CONTROLLABLE, orgwesthoffsweltpdfpresenterControllableIface))

typedef struct _orgwesthoffsweltpdfpresenterControllable orgwesthoffsweltpdfpresenterControllable;
typedef struct _orgwesthoffsweltpdfpresenterControllableIface orgwesthoffsweltpdfpresenterControllableIface;

#define ORG_WESTHOFFSWELT_PDFPRESENTER_METADATA_TYPE_BASE (org_westhoffswelt_pdfpresenter_metadata_base_get_type ())
#define ORG_WESTHOFFSWELT_PDFPRESENTER_METADATA_BASE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), ORG_WESTHOFFSWELT_PDFPRESENTER_METADATA_TYPE_BASE, orgwesthoffsweltpdfpresenterMetadataBase))
#define ORG_WESTHOFFSWELT_PDFPRESENTER_METADATA_BASE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), ORG_WESTHOFFSWELT_PDFPRESENTER_METADATA_TYPE_BASE, orgwesthoffsweltpdfpresenterMetadataBaseClass))
#define ORG_WESTHOFFSWELT_PDFPRESENTER_METADATA_IS_BASE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), ORG_WESTHOFFSWELT_PDFPRESENTER_METADATA_TYPE_BASE))
#define ORG_WESTHOFFSWELT_PDFPRESENTER_METADATA_IS_BASE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), ORG_WESTHOFFSWELT_PDFPRESENTER_METADATA_TYPE_BASE))
#define ORG_WESTHOFFSWELT_PDFPRESENTER_METADATA_BASE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), ORG_WESTHOFFSWELT_PDFPRESENTER_METADATA_TYPE_BASE, orgwesthoffsweltpdfpresenterMetadataBaseClass))

typedef struct _orgwesthoffsweltpdfpresenterMetadataBase orgwesthoffsweltpdfpresenterMetadataBase;
typedef struct _orgwesthoffsweltpdfpresenterMetadataBaseClass orgwesthoffsweltpdfpresenterMetadataBaseClass;

#define ORG_WESTHOFFSWELT_PDFPRESENTER_METADATA_TYPE_PDF (org_westhoffswelt_pdfpresenter_metadata_pdf_get_type ())
#define ORG_WESTHOFFSWELT_PDFPRESENTER_METADATA_PDF(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), ORG_WESTHOFFSWELT_PDFPRESENTER_METADATA_TYPE_PDF, orgwesthoffsweltpdfpresenterMetadataPdf))
#define ORG_WESTHOFFSWELT_PDFPRESENTER_METADATA_PDF_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), ORG_WESTHOFFSWELT_PDFPRESENTER_METADATA_TYPE_PDF, orgwesthoffsweltpdfpresenterMetadataPdfClass))
#define ORG_WESTHOFFSWELT_PDFPRESENTER_METADATA_IS_PDF(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), ORG_WESTHOFFSWELT_PDFPRESENTER_METADATA_TYPE_PDF))
#define ORG_WESTHOFFSWELT_PDFPRESENTER_METADATA_IS_PDF_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), ORG_WESTHOFFSWELT_PDFPRESENTER_METADATA_TYPE_PDF))
#define ORG_WESTHOFFSWELT_PDFPRESENTER_METADATA_PDF_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), ORG_WESTHOFFSWELT_PDFPRESENTER_METADATA_TYPE_PDF, orgwesthoffsweltpdfpresenterMetadataPdfClass))

typedef struct _orgwesthoffsweltpdfpresenterMetadataPdf orgwesthoffsweltpdfpresenterMetadataPdf;
typedef struct _orgwesthoffsweltpdfpresenterMetadataPdfClass orgwesthoffsweltpdfpresenterMetadataPdfClass;

#define ORG_WESTHOFFSWELT_PDFPRESENTER_WINDOW_TYPE_OVERVIEW (org_westhoffswelt_pdfpresenter_window_overview_get_type ())
#define ORG_WESTHOFFSWELT_PDFPRESENTER_WINDOW_OVERVIEW(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), ORG_WESTHOFFSWELT_PDFPRESENTER_WINDOW_TYPE_OVERVIEW, orgwesthoffsweltpdfpresenterWindowOverview))
#define ORG_WESTHOFFSWELT_PDFPRESENTER_WINDOW_OVERVIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), ORG_WESTHOFFSWELT_PDFPRESENTER_WINDOW_TYPE_OVERVIEW, orgwesthoffsweltpdfpresenterWindowOverviewClass))
#define ORG_WESTHOFFSWELT_PDFPRESENTER_WINDOW_IS_OVERVIEW(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), ORG_WESTHOFFSWELT_PDFPRESENTER_WINDOW_TYPE_OVERVIEW))
#define ORG_WESTHOFFSWELT_PDFPRESENTER_WINDOW_IS_OVERVIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), ORG_WESTHOFFSWELT_PDFPRESENTER_WINDOW_TYPE_OVERVIEW))
#define ORG_WESTHOFFSWELT_PDFPRESENTER_WINDOW_OVERVIEW_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), ORG_WESTHOFFSWELT_PDFPRESENTER_WINDOW_TYPE_OVERVIEW, orgwesthoffsweltpdfpresenterWindowOverviewClass))

typedef struct _orgwesthoffsweltpdfpresenterWindowOverview orgwesthoffsweltpdfpresenterWindowOverview;
typedef struct _orgwesthoffsweltpdfpresenterWindowOverviewClass orgwesthoffsweltpdfpresenterWindowOverviewClass;

#define ORG_WESTHOFFSWELT_PDFPRESENTER_PRESENTATION_CONTROLLER_TYPE_KEY_MAPPINGS (org_westhoffswelt_pdfpresenter_presentation_controller_key_mappings_get_type ())
#define __g_list_free__g_object_unref0_0(var) ((var == NULL) ? NULL : (var = (_g_list_free__g_object_unref0_ (var), NULL)))
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))

struct _orgwesthoffsweltpdfpresenterControllableIface {
	GTypeInterface parent_iface;
	orgwesthoffsweltpdfpresenterPresentationController* (*get_controller) (orgwesthoffsweltpdfpresenterControllable* self);
	void (*update) (orgwesthoffsweltpdfpresenterControllable* self);
	void (*edit_note) (orgwesthoffsweltpdfpresenterControllable* self);
	void (*ask_goto_page) (orgwesthoffsweltpdfpresenterControllable* self);
	void (*toggle_pause) (orgwesthoffsweltpdfpresenterControllable* self);
	void (*reset_timer) (orgwesthoffsweltpdfpresenterControllable* self);
	void (*show_overview) (orgwesthoffsweltpdfpresenterControllable* self);
	void (*hide_overview) (orgwesthoffsweltpdfpresenterControllable* self);
};

struct _orgwesthoffsweltpdfpresenterPresentationController {
	GObject parent_instance;
	orgwesthoffsweltpdfpresenterPresentationControllerPrivate * priv;
	gint current_slide_number;
	gint current_user_slide_number;
	gboolean faded_to_black;
	gboolean frozen;
	gboolean black_on_end;
	gint n_slides;
	GList* controllables;
	gboolean ignore_keyboard_events;
	gboolean ignore_mouse_events;
	orgwesthoffsweltpdfpresenterMetadataPdf* metadata;
	orgwesthoffsweltpdfpresenterWindowOverview* overview;
	guint last_key_event;
};

struct _orgwesthoffsweltpdfpresenterPresentationControllerClass {
	GObjectClass parent_class;
};

typedef enum  {
	ORG_WESTHOFFSWELT_PDFPRESENTER_PRESENTATION_CONTROLLER_KEY_MAPPINGS_Normal,
	ORG_WESTHOFFSWELT_PDFPRESENTER_PRESENTATION_CONTROLLER_KEY_MAPPINGS_Overview
} orgwesthoffsweltpdfpresenterPresentationControllerKeyMappings;

struct _orgwesthoffsweltpdfpresenterPresentationControllerPrivate {
	gint* history;
	gint history_length1;
	gint _history_size_;
	orgwesthoffsweltpdfpresenterPresentationControllerKeyMappings current_key_mapping;
};


static gpointer org_westhoffswelt_pdfpresenter_presentation_controller_parent_class = NULL;

GType org_westhoffswelt_pdfpresenter_presentation_controller_get_type (void) G_GNUC_CONST;
GType org_westhoffswelt_pdfpresenter_controllable_get_type (void) G_GNUC_CONST;
GType org_westhoffswelt_pdfpresenter_metadata_base_get_type (void) G_GNUC_CONST;
GType org_westhoffswelt_pdfpresenter_metadata_pdf_get_type (void) G_GNUC_CONST;
GType org_westhoffswelt_pdfpresenter_window_overview_get_type (void) G_GNUC_CONST;
static GType org_westhoffswelt_pdfpresenter_presentation_controller_key_mappings_get_type (void) G_GNUC_UNUSED;
#define ORG_WESTHOFFSWELT_PDFPRESENTER_PRESENTATION_CONTROLLER_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), ORG_WESTHOFFSWELT_PDFPRESENTER_TYPE_PRESENTATION_CONTROLLER, orgwesthoffsweltpdfpresenterPresentationControllerPrivate))
enum  {
	ORG_WESTHOFFSWELT_PDFPRESENTER_PRESENTATION_CONTROLLER_DUMMY_PROPERTY
};
static void _g_object_unref0_ (gpointer var);
static void _g_list_free__g_object_unref0_ (GList* self);
orgwesthoffsweltpdfpresenterPresentationController* org_westhoffswelt_pdfpresenter_presentation_controller_new (orgwesthoffsweltpdfpresenterMetadataPdf* metadata, gboolean allow_black_on_end);
orgwesthoffsweltpdfpresenterPresentationController* org_westhoffswelt_pdfpresenter_presentation_controller_construct (GType object_type, orgwesthoffsweltpdfpresenterMetadataPdf* metadata, gboolean allow_black_on_end);
guint org_westhoffswelt_pdfpresenter_metadata_base_get_slide_count (orgwesthoffsweltpdfpresenterMetadataBase* self);
void org_westhoffswelt_pdfpresenter_presentation_controller_set_overview (orgwesthoffsweltpdfpresenterPresentationController* self, orgwesthoffsweltpdfpresenterWindowOverview* o);
gboolean org_westhoffswelt_pdfpresenter_presentation_controller_key_press (orgwesthoffsweltpdfpresenterPresentationController* self, GdkEventKey* key);
gboolean org_westhoffswelt_pdfpresenter_presentation_controller_key_press_normal (orgwesthoffsweltpdfpresenterPresentationController* self, GdkEventKey* key);
gboolean org_westhoffswelt_pdfpresenter_presentation_controller_key_press_overview (orgwesthoffsweltpdfpresenterPresentationController* self, GdkEventKey* key);
void org_westhoffswelt_pdfpresenter_presentation_controller_jump10 (orgwesthoffsweltpdfpresenterPresentationController* self);
void org_westhoffswelt_pdfpresenter_presentation_controller_next_page (orgwesthoffsweltpdfpresenterPresentationController* self);
void org_westhoffswelt_pdfpresenter_presentation_controller_next_user_page (orgwesthoffsweltpdfpresenterPresentationController* self);
void org_westhoffswelt_pdfpresenter_presentation_controller_back10 (orgwesthoffsweltpdfpresenterPresentationController* self);
void org_westhoffswelt_pdfpresenter_presentation_controller_previous_page (orgwesthoffsweltpdfpresenterPresentationController* self);
void org_westhoffswelt_pdfpresenter_presentation_controller_previous_user_page (orgwesthoffsweltpdfpresenterPresentationController* self);
void org_westhoffswelt_pdfpresenter_metadata_pdf_save_to_disk (orgwesthoffsweltpdfpresenterMetadataPdf* self);
void org_westhoffswelt_pdfpresenter_presentation_controller_controllables_reset (orgwesthoffsweltpdfpresenterPresentationController* self);
void org_westhoffswelt_pdfpresenter_presentation_controller_goto_first (orgwesthoffsweltpdfpresenterPresentationController* self);
void org_westhoffswelt_pdfpresenter_presentation_controller_goto_last (orgwesthoffsweltpdfpresenterPresentationController* self);
void org_westhoffswelt_pdfpresenter_presentation_controller_fade_to_black (orgwesthoffsweltpdfpresenterPresentationController* self);
void org_westhoffswelt_pdfpresenter_presentation_controller_controllables_edit_note (orgwesthoffsweltpdfpresenterPresentationController* self);
void org_westhoffswelt_pdfpresenter_presentation_controller_controllables_ask_goto_page (orgwesthoffsweltpdfpresenterPresentationController* self);
void org_westhoffswelt_pdfpresenter_presentation_controller_toggle_freeze (orgwesthoffsweltpdfpresenterPresentationController* self);
void org_westhoffswelt_pdfpresenter_presentation_controller_toggle_skip (orgwesthoffsweltpdfpresenterPresentationController* self);
void org_westhoffswelt_pdfpresenter_presentation_controller_start (orgwesthoffsweltpdfpresenterPresentationController* self);
void org_westhoffswelt_pdfpresenter_presentation_controller_toggle_pause (orgwesthoffsweltpdfpresenterPresentationController* self);
void org_westhoffswelt_pdfpresenter_presentation_controller_set_end_user_slide (orgwesthoffsweltpdfpresenterPresentationController* self);
void org_westhoffswelt_pdfpresenter_presentation_controller_controllables_show_overview (orgwesthoffsweltpdfpresenterPresentationController* self);
void org_westhoffswelt_pdfpresenter_presentation_controller_history_back (orgwesthoffsweltpdfpresenterPresentationController* self);
void org_westhoffswelt_pdfpresenter_presentation_controller_toggle_skip_overview (orgwesthoffsweltpdfpresenterPresentationController* self);
void org_westhoffswelt_pdfpresenter_presentation_controller_set_end_user_slide_overview (orgwesthoffsweltpdfpresenterPresentationController* self);
void org_westhoffswelt_pdfpresenter_presentation_controller_controllables_hide_overview (orgwesthoffsweltpdfpresenterPresentationController* self);
gboolean org_westhoffswelt_pdfpresenter_presentation_controller_button_press (orgwesthoffsweltpdfpresenterPresentationController* self, GdkEventButton* button);
void org_westhoffswelt_pdfpresenter_presentation_controller_scroll (orgwesthoffsweltpdfpresenterPresentationController* self, GdkEventScroll* scroll);
gint org_westhoffswelt_pdfpresenter_presentation_controller_get_current_slide_number (orgwesthoffsweltpdfpresenterPresentationController* self);
gint org_westhoffswelt_pdfpresenter_presentation_controller_get_current_user_slide_number (orgwesthoffsweltpdfpresenterPresentationController* self);
gboolean org_westhoffswelt_pdfpresenter_presentation_controller_skip_previous (orgwesthoffsweltpdfpresenterPresentationController* self);
gint org_westhoffswelt_pdfpresenter_metadata_pdf_user_slide_to_real_slide (orgwesthoffsweltpdfpresenterMetadataPdf* self, gint number);
gboolean org_westhoffswelt_pdfpresenter_presentation_controller_skip_next (orgwesthoffsweltpdfpresenterPresentationController* self);
gint org_westhoffswelt_pdfpresenter_metadata_pdf_get_user_slide_count (orgwesthoffsweltpdfpresenterMetadataPdf* self);
gint org_westhoffswelt_pdfpresenter_presentation_controller_get_n_slide (orgwesthoffsweltpdfpresenterPresentationController* self);
gint org_westhoffswelt_pdfpresenter_presentation_controller_get_user_n_slides (orgwesthoffsweltpdfpresenterPresentationController* self);
gint org_westhoffswelt_pdfpresenter_presentation_controller_get_end_user_slide (orgwesthoffsweltpdfpresenterPresentationController* self);
gint org_westhoffswelt_pdfpresenter_metadata_pdf_get_end_user_slide (orgwesthoffsweltpdfpresenterMetadataPdf* self);
void org_westhoffswelt_pdfpresenter_metadata_pdf_set_end_user_slide (orgwesthoffsweltpdfpresenterMetadataPdf* self, gint slide);
void org_westhoffswelt_pdfpresenter_presentation_controller_controllables_update (orgwesthoffsweltpdfpresenterPresentationController* self);
gint org_westhoffswelt_pdfpresenter_window_overview_get_current_button (orgwesthoffsweltpdfpresenterWindowOverview* self);
static void org_westhoffswelt_pdfpresenter_presentation_controller_slide2history (orgwesthoffsweltpdfpresenterPresentationController* self);
static void _vala_array_add1 (gint** array, int* length, int* size, gint value);
void org_westhoffswelt_pdfpresenter_presentation_controller_page_change_request (orgwesthoffsweltpdfpresenterPresentationController* self, gint page_number);
gint org_westhoffswelt_pdfpresenter_metadata_pdf_real_slide_to_user_slide (orgwesthoffsweltpdfpresenterMetadataPdf* self, gint number);
void org_westhoffswelt_pdfpresenter_presentation_controller_set_ignore_input_events (orgwesthoffsweltpdfpresenterPresentationController* self, gboolean v);
void org_westhoffswelt_pdfpresenter_presentation_controller_set_ignore_mouse_events (orgwesthoffsweltpdfpresenterPresentationController* self, gboolean v);
gboolean org_westhoffswelt_pdfpresenter_presentation_controller_register_controllable (orgwesthoffsweltpdfpresenterPresentationController* self, orgwesthoffsweltpdfpresenterControllable* controllable);
gboolean org_westhoffswelt_pdfpresenter_presentation_controller_is_faded_to_black (orgwesthoffsweltpdfpresenterPresentationController* self);
void org_westhoffswelt_pdfpresenter_presentation_controller_goto_user_page (orgwesthoffsweltpdfpresenterPresentationController* self, gint page_number);
void org_westhoffswelt_pdfpresenter_controllable_update (orgwesthoffsweltpdfpresenterControllable* self);
void org_westhoffswelt_pdfpresenter_presentation_controller_reset_timer (orgwesthoffsweltpdfpresenterPresentationController* self);
void org_westhoffswelt_pdfpresenter_controllable_show_overview (orgwesthoffsweltpdfpresenterControllable* self);
void org_westhoffswelt_pdfpresenter_controllable_edit_note (orgwesthoffsweltpdfpresenterControllable* self);
void org_westhoffswelt_pdfpresenter_controllable_ask_goto_page (orgwesthoffsweltpdfpresenterControllable* self);
gboolean org_westhoffswelt_pdfpresenter_presentation_controller_is_frozen (orgwesthoffsweltpdfpresenterPresentationController* self);
gint org_westhoffswelt_pdfpresenter_metadata_pdf_toggle_skip (orgwesthoffsweltpdfpresenterMetadataPdf* self, gint slide_number, gint user_slide_number);
void org_westhoffswelt_pdfpresenter_window_overview_set_n_slides (orgwesthoffsweltpdfpresenterWindowOverview* self, gint n);
void org_westhoffswelt_pdfpresenter_controllable_toggle_pause (orgwesthoffsweltpdfpresenterControllable* self);
void org_westhoffswelt_pdfpresenter_controllable_reset_timer (orgwesthoffsweltpdfpresenterControllable* self);
static void org_westhoffswelt_pdfpresenter_presentation_controller_finalize (GObject* obj);


/**
         * Handle keypresses to each of the controllables
         *
         * This seperate handling is needed because keypresses from any of the
         * window have implications on the behaviour of both of them. Therefore
         * this controller is needed to take care of the needed actions.
         *
         * There are no Vala bindings for gdk/gdkkeysyms.h
         * https://bugzilla.gnome.org/show_bug.cgi?id=551184
         *
         */
static GType org_westhoffswelt_pdfpresenter_presentation_controller_key_mappings_get_type (void) {
	static volatile gsize org_westhoffswelt_pdfpresenter_presentation_controller_key_mappings_type_id__volatile = 0;
	if (g_once_init_enter (&org_westhoffswelt_pdfpresenter_presentation_controller_key_mappings_type_id__volatile)) {
		static const GEnumValue values[] = {{ORG_WESTHOFFSWELT_PDFPRESENTER_PRESENTATION_CONTROLLER_KEY_MAPPINGS_Normal, "ORG_WESTHOFFSWELT_PDFPRESENTER_PRESENTATION_CONTROLLER_KEY_MAPPINGS_Normal", "normal"}, {ORG_WESTHOFFSWELT_PDFPRESENTER_PRESENTATION_CONTROLLER_KEY_MAPPINGS_Overview, "ORG_WESTHOFFSWELT_PDFPRESENTER_PRESENTATION_CONTROLLER_KEY_MAPPINGS_Overview", "overview"}, {0, NULL, NULL}};
		GType org_westhoffswelt_pdfpresenter_presentation_controller_key_mappings_type_id;
		org_westhoffswelt_pdfpresenter_presentation_controller_key_mappings_type_id = g_enum_register_static ("orgwesthoffsweltpdfpresenterPresentationControllerKeyMappings", values);
		g_once_init_leave (&org_westhoffswelt_pdfpresenter_presentation_controller_key_mappings_type_id__volatile, org_westhoffswelt_pdfpresenter_presentation_controller_key_mappings_type_id);
	}
	return org_westhoffswelt_pdfpresenter_presentation_controller_key_mappings_type_id__volatile;
}


static void _g_object_unref0_ (gpointer var) {
	(var == NULL) ? NULL : (var = (g_object_unref (var), NULL));
}


static void _g_list_free__g_object_unref0_ (GList* self) {
	g_list_foreach (self, (GFunc) _g_object_unref0_, NULL);
	g_list_free (self);
}


/**
         * Instantiate a new controller
         */
static gpointer _g_object_ref0 (gpointer self) {
	return self ? g_object_ref (self) : NULL;
}


orgwesthoffsweltpdfpresenterPresentationController* org_westhoffswelt_pdfpresenter_presentation_controller_construct (GType object_type, orgwesthoffsweltpdfpresenterMetadataPdf* metadata, gboolean allow_black_on_end) {
	orgwesthoffsweltpdfpresenterPresentationController * self = NULL;
	orgwesthoffsweltpdfpresenterMetadataPdf* _tmp0_;
	orgwesthoffsweltpdfpresenterMetadataPdf* _tmp1_;
	orgwesthoffsweltpdfpresenterMetadataPdf* _tmp2_;
	guint _tmp3_ = 0U;
	gboolean _tmp4_;
	g_return_val_if_fail (metadata != NULL, NULL);
	self = (orgwesthoffsweltpdfpresenterPresentationController*) g_object_new (object_type, NULL);
	__g_list_free__g_object_unref0_0 (self->controllables);
	self->controllables = NULL;
	_tmp0_ = metadata;
	_tmp1_ = _g_object_ref0 (_tmp0_);
	_g_object_unref0 (self->metadata);
	self->metadata = _tmp1_;
	_tmp2_ = metadata;
	_tmp3_ = org_westhoffswelt_pdfpresenter_metadata_base_get_slide_count ((orgwesthoffsweltpdfpresenterMetadataBase*) _tmp2_);
	self->n_slides = (gint) _tmp3_;
	_tmp4_ = allow_black_on_end;
	self->black_on_end = _tmp4_;
	self->current_slide_number = 0;
	self->current_user_slide_number = 0;
	return self;
}


orgwesthoffsweltpdfpresenterPresentationController* org_westhoffswelt_pdfpresenter_presentation_controller_new (orgwesthoffsweltpdfpresenterMetadataPdf* metadata, gboolean allow_black_on_end) {
	return org_westhoffswelt_pdfpresenter_presentation_controller_construct (ORG_WESTHOFFSWELT_PDFPRESENTER_TYPE_PRESENTATION_CONTROLLER, metadata, allow_black_on_end);
}


void org_westhoffswelt_pdfpresenter_presentation_controller_set_overview (orgwesthoffsweltpdfpresenterPresentationController* self, orgwesthoffsweltpdfpresenterWindowOverview* o) {
	orgwesthoffsweltpdfpresenterWindowOverview* _tmp0_;
	orgwesthoffsweltpdfpresenterWindowOverview* _tmp1_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (o != NULL);
	_tmp0_ = o;
	_tmp1_ = _g_object_ref0 (_tmp0_);
	_g_object_unref0 (self->overview);
	self->overview = _tmp1_;
}


gboolean org_westhoffswelt_pdfpresenter_presentation_controller_key_press (orgwesthoffsweltpdfpresenterPresentationController* self, GdkEventKey* key) {
	gboolean result = FALSE;
	GdkEventKey _tmp0_;
	guint32 _tmp1_;
	guint _tmp2_;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (key != NULL, FALSE);
	_tmp0_ = *key;
	_tmp1_ = _tmp0_.time;
	_tmp2_ = self->last_key_event;
	if (_tmp1_ != ((guint32) _tmp2_)) {
		GdkEventKey _tmp3_;
		guint32 _tmp4_;
		orgwesthoffsweltpdfpresenterPresentationControllerKeyMappings _tmp5_;
		_tmp3_ = *key;
		_tmp4_ = _tmp3_.time;
		self->last_key_event = (guint) _tmp4_;
		_tmp5_ = self->priv->current_key_mapping;
		switch (_tmp5_) {
			case ORG_WESTHOFFSWELT_PDFPRESENTER_PRESENTATION_CONTROLLER_KEY_MAPPINGS_Normal:
			{
				GdkEventKey _tmp6_;
				gboolean _tmp7_ = FALSE;
				_tmp6_ = *key;
				_tmp7_ = org_westhoffswelt_pdfpresenter_presentation_controller_key_press_normal (self, &_tmp6_);
				result = _tmp7_;
				return result;
			}
			case ORG_WESTHOFFSWELT_PDFPRESENTER_PRESENTATION_CONTROLLER_KEY_MAPPINGS_Overview:
			{
				GdkEventKey _tmp8_;
				gboolean _tmp9_ = FALSE;
				_tmp8_ = *key;
				_tmp9_ = org_westhoffswelt_pdfpresenter_presentation_controller_key_press_overview (self, &_tmp8_);
				result = _tmp9_;
				return result;
			}
			default:
			break;
		}
	}
	result = TRUE;
	return result;
}


gboolean org_westhoffswelt_pdfpresenter_presentation_controller_key_press_normal (orgwesthoffsweltpdfpresenterPresentationController* self, GdkEventKey* key) {
	gboolean result = FALSE;
	gboolean _tmp0_;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (key != NULL, FALSE);
	_tmp0_ = self->ignore_keyboard_events;
	if (!_tmp0_) {
		GdkEventKey _tmp1_;
		guint _tmp2_;
		_tmp1_ = *key;
		_tmp2_ = _tmp1_.keyval;
		switch (_tmp2_) {
			case 0xff0d:
			case 0x1008ff17:
			case 0xff53:
			case 0xff56:
			case 0x020:
			{
				GdkEventKey _tmp3_;
				GdkModifierType _tmp4_;
				_tmp3_ = *key;
				_tmp4_ = _tmp3_.state;
				if ((_tmp4_ & GDK_SHIFT_MASK) != 0) {
					org_westhoffswelt_pdfpresenter_presentation_controller_jump10 (self);
				} else {
					org_westhoffswelt_pdfpresenter_presentation_controller_next_page (self);
				}
				break;
			}
			case 0xff54:
			{
				org_westhoffswelt_pdfpresenter_presentation_controller_next_user_page (self);
				break;
			}
			case 0xff51:
			case 0x1008ff16:
			case 0xff55:
			{
				GdkEventKey _tmp5_;
				GdkModifierType _tmp6_;
				_tmp5_ = *key;
				_tmp6_ = _tmp5_.state;
				if ((_tmp6_ & GDK_SHIFT_MASK) != 0) {
					org_westhoffswelt_pdfpresenter_presentation_controller_back10 (self);
				} else {
					org_westhoffswelt_pdfpresenter_presentation_controller_previous_page (self);
				}
				break;
			}
			case 0xff52:
			{
				org_westhoffswelt_pdfpresenter_presentation_controller_previous_user_page (self);
				break;
			}
			case 0xff1b:
			case 0x071:
			{
				orgwesthoffsweltpdfpresenterMetadataPdf* _tmp7_;
				_tmp7_ = self->metadata;
				org_westhoffswelt_pdfpresenter_metadata_pdf_save_to_disk (_tmp7_);
				gtk_main_quit ();
				break;
			}
			case 0x072:
			{
				org_westhoffswelt_pdfpresenter_presentation_controller_controllables_reset (self);
				break;
			}
			case 0xff50:
			{
				org_westhoffswelt_pdfpresenter_presentation_controller_goto_first (self);
				break;
			}
			case 0xff57:
			{
				org_westhoffswelt_pdfpresenter_presentation_controller_goto_last (self);
				break;
			}
			case 0x062:
			{
				org_westhoffswelt_pdfpresenter_presentation_controller_fade_to_black (self);
				break;
			}
			case 0x06e:
			{
				org_westhoffswelt_pdfpresenter_presentation_controller_controllables_edit_note (self);
				break;
			}
			case 0x067:
			{
				org_westhoffswelt_pdfpresenter_presentation_controller_controllables_ask_goto_page (self);
				break;
			}
			case 0x066:
			{
				org_westhoffswelt_pdfpresenter_presentation_controller_toggle_freeze (self);
				break;
			}
			case 0x06f:
			{
				org_westhoffswelt_pdfpresenter_presentation_controller_toggle_skip (self);
				break;
			}
			case 0x073:
			{
				org_westhoffswelt_pdfpresenter_presentation_controller_start (self);
				break;
			}
			case 0x070:
			case 0xff13:
			{
				org_westhoffswelt_pdfpresenter_presentation_controller_toggle_pause (self);
				break;
			}
			case 0x065:
			{
				org_westhoffswelt_pdfpresenter_presentation_controller_set_end_user_slide (self);
				break;
			}
			case 0xff09:
			{
				org_westhoffswelt_pdfpresenter_presentation_controller_controllables_show_overview (self);
				break;
			}
			case 0xff08:
			{
				org_westhoffswelt_pdfpresenter_presentation_controller_history_back (self);
				break;
			}
			default:
			break;
		}
		result = TRUE;
		return result;
	} else {
		result = FALSE;
		return result;
	}
}


/**
         * Handle key presses when in overview mode
         *
         * This is a subset of the keybindings above
         */
gboolean org_westhoffswelt_pdfpresenter_presentation_controller_key_press_overview (orgwesthoffsweltpdfpresenterPresentationController* self, GdkEventKey* key) {
	gboolean result = FALSE;
	gboolean handled;
	GdkEventKey _tmp0_;
	guint _tmp1_;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (key != NULL, FALSE);
	handled = FALSE;
	_tmp0_ = *key;
	_tmp1_ = _tmp0_.keyval;
	switch (_tmp1_) {
		case 0xff1b:
		case 0x071:
		{
			orgwesthoffsweltpdfpresenterMetadataPdf* _tmp2_;
			_tmp2_ = self->metadata;
			org_westhoffswelt_pdfpresenter_metadata_pdf_save_to_disk (_tmp2_);
			gtk_main_quit ();
			handled = TRUE;
			break;
		}
		case 0x072:
		{
			org_westhoffswelt_pdfpresenter_presentation_controller_controllables_reset (self);
			handled = TRUE;
			break;
		}
		case 0x062:
		{
			org_westhoffswelt_pdfpresenter_presentation_controller_fade_to_black (self);
			handled = TRUE;
			break;
		}
		case 0x067:
		{
			org_westhoffswelt_pdfpresenter_presentation_controller_controllables_ask_goto_page (self);
			handled = TRUE;
			break;
		}
		case 0x066:
		{
			org_westhoffswelt_pdfpresenter_presentation_controller_toggle_freeze (self);
			handled = TRUE;
			break;
		}
		case 0x06f:
		{
			org_westhoffswelt_pdfpresenter_presentation_controller_toggle_skip_overview (self);
			handled = TRUE;
			break;
		}
		case 0x073:
		{
			org_westhoffswelt_pdfpresenter_presentation_controller_start (self);
			handled = TRUE;
			break;
		}
		case 0x070:
		case 0xff13:
		{
			org_westhoffswelt_pdfpresenter_presentation_controller_toggle_pause (self);
			handled = TRUE;
			break;
		}
		case 0x065:
		{
			org_westhoffswelt_pdfpresenter_presentation_controller_set_end_user_slide_overview (self);
			handled = TRUE;
			break;
		}
		case 0xff09:
		{
			org_westhoffswelt_pdfpresenter_presentation_controller_controllables_hide_overview (self);
			handled = TRUE;
			break;
		}
		default:
		break;
	}
	result = handled;
	return result;
}


/**
         * Handle mouse clicks to each of the controllables
         */
gboolean org_westhoffswelt_pdfpresenter_presentation_controller_button_press (orgwesthoffsweltpdfpresenterPresentationController* self, GdkEventButton* button) {
	gboolean result = FALSE;
	gboolean _tmp0_ = FALSE;
	gboolean _tmp1_;
	gboolean _tmp4_;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (button != NULL, FALSE);
	_tmp1_ = self->ignore_mouse_events;
	if (!_tmp1_) {
		GdkEventButton _tmp2_;
		GdkEventType _tmp3_;
		_tmp2_ = *button;
		_tmp3_ = _tmp2_.type;
		_tmp0_ = _tmp3_ == GDK_BUTTON_PRESS;
	} else {
		_tmp0_ = FALSE;
	}
	_tmp4_ = _tmp0_;
	if (_tmp4_) {
		GdkEventButton _tmp5_;
		guint _tmp6_;
		_tmp5_ = *button;
		_tmp6_ = _tmp5_.button;
		switch (_tmp6_) {
			case 1:
			{
				GdkEventButton _tmp7_;
				GdkModifierType _tmp8_;
				_tmp7_ = *button;
				_tmp8_ = _tmp7_.state;
				if ((_tmp8_ & GDK_SHIFT_MASK) != 0) {
					org_westhoffswelt_pdfpresenter_presentation_controller_jump10 (self);
				} else {
					org_westhoffswelt_pdfpresenter_presentation_controller_next_page (self);
				}
				break;
			}
			case 3:
			{
				GdkEventButton _tmp9_;
				GdkModifierType _tmp10_;
				_tmp9_ = *button;
				_tmp10_ = _tmp9_.state;
				if ((_tmp10_ & GDK_SHIFT_MASK) != 0) {
					org_westhoffswelt_pdfpresenter_presentation_controller_back10 (self);
				} else {
					org_westhoffswelt_pdfpresenter_presentation_controller_previous_page (self);
				}
				break;
			}
			default:
			break;
		}
		result = TRUE;
		return result;
	} else {
		result = FALSE;
		return result;
	}
}


/**
         * Notify each of the controllables of mouse scrolling
         */
void org_westhoffswelt_pdfpresenter_presentation_controller_scroll (orgwesthoffsweltpdfpresenterPresentationController* self, GdkEventScroll* scroll) {
	gboolean _tmp0_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (scroll != NULL);
	_tmp0_ = self->ignore_mouse_events;
	if (!_tmp0_) {
		GdkEventScroll _tmp1_;
		GdkScrollDirection _tmp2_;
		_tmp1_ = *scroll;
		_tmp2_ = _tmp1_.direction;
		switch (_tmp2_) {
			case GDK_SCROLL_UP:
			case GDK_SCROLL_LEFT:
			{
				GdkEventScroll _tmp3_;
				GdkModifierType _tmp4_;
				_tmp3_ = *scroll;
				_tmp4_ = _tmp3_.state;
				if ((_tmp4_ & GDK_SHIFT_MASK) != 0) {
					org_westhoffswelt_pdfpresenter_presentation_controller_back10 (self);
				} else {
					org_westhoffswelt_pdfpresenter_presentation_controller_previous_page (self);
				}
				break;
			}
			case GDK_SCROLL_DOWN:
			case GDK_SCROLL_RIGHT:
			{
				GdkEventScroll _tmp5_;
				GdkModifierType _tmp6_;
				_tmp5_ = *scroll;
				_tmp6_ = _tmp5_.state;
				if ((_tmp6_ & GDK_SHIFT_MASK) != 0) {
					org_westhoffswelt_pdfpresenter_presentation_controller_jump10 (self);
				} else {
					org_westhoffswelt_pdfpresenter_presentation_controller_next_page (self);
				}
				break;
			}
			default:
			break;
		}
	}
}


/**
         * Get the current (real) slide number
         */
gint org_westhoffswelt_pdfpresenter_presentation_controller_get_current_slide_number (orgwesthoffsweltpdfpresenterPresentationController* self) {
	gint result = 0;
	gint _tmp0_;
	g_return_val_if_fail (self != NULL, 0);
	_tmp0_ = self->current_slide_number;
	result = _tmp0_;
	return result;
}


/**
         * Get the current (user) slide number
         */
gint org_westhoffswelt_pdfpresenter_presentation_controller_get_current_user_slide_number (orgwesthoffsweltpdfpresenterPresentationController* self) {
	gint result = 0;
	gint _tmp0_;
	g_return_val_if_fail (self != NULL, 0);
	_tmp0_ = self->current_user_slide_number;
	result = _tmp0_;
	return result;
}


/**
         * Was the previous slide a skip one?
         */
gboolean org_westhoffswelt_pdfpresenter_presentation_controller_skip_previous (orgwesthoffsweltpdfpresenterPresentationController* self) {
	gboolean result = FALSE;
	gint _tmp0_;
	orgwesthoffsweltpdfpresenterMetadataPdf* _tmp1_;
	gint _tmp2_;
	gint _tmp3_ = 0;
	g_return_val_if_fail (self != NULL, FALSE);
	_tmp0_ = self->current_slide_number;
	_tmp1_ = self->metadata;
	_tmp2_ = self->current_user_slide_number;
	_tmp3_ = org_westhoffswelt_pdfpresenter_metadata_pdf_user_slide_to_real_slide (_tmp1_, _tmp2_);
	result = _tmp0_ > _tmp3_;
	return result;
}


/**
         * Is the next slide a skip one?
         */
gboolean org_westhoffswelt_pdfpresenter_presentation_controller_skip_next (orgwesthoffsweltpdfpresenterPresentationController* self) {
	gboolean result = FALSE;
	gboolean _tmp0_ = FALSE;
	gboolean _tmp1_ = FALSE;
	gint _tmp2_;
	orgwesthoffsweltpdfpresenterMetadataPdf* _tmp3_;
	gint _tmp4_ = 0;
	gboolean _tmp7_;
	gboolean _tmp12_;
	g_return_val_if_fail (self != NULL, FALSE);
	_tmp2_ = self->current_user_slide_number;
	_tmp3_ = self->metadata;
	_tmp4_ = org_westhoffswelt_pdfpresenter_metadata_pdf_get_user_slide_count (_tmp3_);
	if (_tmp2_ >= (_tmp4_ - 1)) {
		gint _tmp5_;
		gint _tmp6_;
		_tmp5_ = self->current_slide_number;
		_tmp6_ = self->n_slides;
		_tmp1_ = _tmp5_ < _tmp6_;
	} else {
		_tmp1_ = FALSE;
	}
	_tmp7_ = _tmp1_;
	if (_tmp7_) {
		_tmp0_ = TRUE;
	} else {
		gint _tmp8_;
		orgwesthoffsweltpdfpresenterMetadataPdf* _tmp9_;
		gint _tmp10_;
		gint _tmp11_ = 0;
		_tmp8_ = self->current_slide_number;
		_tmp9_ = self->metadata;
		_tmp10_ = self->current_user_slide_number;
		_tmp11_ = org_westhoffswelt_pdfpresenter_metadata_pdf_user_slide_to_real_slide (_tmp9_, _tmp10_ + 1);
		_tmp0_ = (_tmp8_ + 1) < _tmp11_;
	}
	_tmp12_ = _tmp0_;
	result = _tmp12_;
	return result;
}


/**
         * Get the real total number of slides
         */
gint org_westhoffswelt_pdfpresenter_presentation_controller_get_n_slide (orgwesthoffsweltpdfpresenterPresentationController* self) {
	gint result = 0;
	gint _tmp0_;
	g_return_val_if_fail (self != NULL, 0);
	_tmp0_ = self->n_slides;
	result = _tmp0_;
	return result;
}


/**
         * Get the user total number of slides
         */
gint org_westhoffswelt_pdfpresenter_presentation_controller_get_user_n_slides (orgwesthoffsweltpdfpresenterPresentationController* self) {
	gint result = 0;
	orgwesthoffsweltpdfpresenterMetadataPdf* _tmp0_;
	gint _tmp1_ = 0;
	g_return_val_if_fail (self != NULL, 0);
	_tmp0_ = self->metadata;
	_tmp1_ = org_westhoffswelt_pdfpresenter_metadata_pdf_get_user_slide_count (_tmp0_);
	result = _tmp1_;
	return result;
}


/**
         * Get the last slide as defined by the user
         */
gint org_westhoffswelt_pdfpresenter_presentation_controller_get_end_user_slide (orgwesthoffsweltpdfpresenterPresentationController* self) {
	gint result = 0;
	orgwesthoffsweltpdfpresenterMetadataPdf* _tmp0_;
	gint _tmp1_ = 0;
	g_return_val_if_fail (self != NULL, 0);
	_tmp0_ = self->metadata;
	_tmp1_ = org_westhoffswelt_pdfpresenter_metadata_pdf_get_end_user_slide (_tmp0_);
	result = _tmp1_;
	return result;
}


/**
         * Set the last slide as defined by the user
         */
void org_westhoffswelt_pdfpresenter_presentation_controller_set_end_user_slide (orgwesthoffsweltpdfpresenterPresentationController* self) {
	orgwesthoffsweltpdfpresenterMetadataPdf* _tmp0_;
	gint _tmp1_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->metadata;
	_tmp1_ = self->current_user_slide_number;
	org_westhoffswelt_pdfpresenter_metadata_pdf_set_end_user_slide (_tmp0_, _tmp1_ + 1);
	org_westhoffswelt_pdfpresenter_presentation_controller_controllables_update (self);
}


/**
         * Set the last slide as defined by the user
         */
void org_westhoffswelt_pdfpresenter_presentation_controller_set_end_user_slide_overview (orgwesthoffsweltpdfpresenterPresentationController* self) {
	orgwesthoffsweltpdfpresenterWindowOverview* _tmp0_;
	gint _tmp1_ = 0;
	gint user_selected;
	orgwesthoffsweltpdfpresenterMetadataPdf* _tmp2_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->overview;
	_tmp1_ = org_westhoffswelt_pdfpresenter_window_overview_get_current_button (_tmp0_);
	user_selected = _tmp1_;
	_tmp2_ = self->metadata;
	org_westhoffswelt_pdfpresenter_metadata_pdf_set_end_user_slide (_tmp2_, user_selected + 1);
}


/**
         * Register the current slide in the history
         */
static void _vala_array_add1 (gint** array, int* length, int* size, gint value) {
	if ((*length) == (*size)) {
		*size = (*size) ? (2 * (*size)) : 4;
		*array = g_renew (gint, *array, *size);
	}
	(*array)[(*length)++] = value;
}


static void org_westhoffswelt_pdfpresenter_presentation_controller_slide2history (orgwesthoffsweltpdfpresenterPresentationController* self) {
	gint* _tmp0_;
	gint _tmp0__length1;
	gint _tmp1_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->history;
	_tmp0__length1 = self->priv->history_length1;
	_tmp1_ = self->current_slide_number;
	_vala_array_add1 (&self->priv->history, &self->priv->history_length1, &self->priv->_history_size_, _tmp1_);
}


/**
         * A request to change the page has been issued
         */
void org_westhoffswelt_pdfpresenter_presentation_controller_page_change_request (orgwesthoffsweltpdfpresenterPresentationController* self, gint page_number) {
	gint _tmp0_;
	gint _tmp1_;
	gint _tmp2_;
	orgwesthoffsweltpdfpresenterMetadataPdf* _tmp3_;
	gint _tmp4_;
	gint _tmp5_ = 0;
	g_return_if_fail (self != NULL);
	_tmp0_ = page_number;
	_tmp1_ = self->current_slide_number;
	if (_tmp0_ != _tmp1_) {
		org_westhoffswelt_pdfpresenter_presentation_controller_slide2history (self);
	}
	_tmp2_ = page_number;
	self->current_slide_number = _tmp2_;
	_tmp3_ = self->metadata;
	_tmp4_ = self->current_slide_number;
	_tmp5_ = org_westhoffswelt_pdfpresenter_metadata_pdf_real_slide_to_user_slide (_tmp3_, _tmp4_);
	self->current_user_slide_number = _tmp5_;
	org_westhoffswelt_pdfpresenter_presentation_controller_controllables_update (self);
}


/**
         * Set the state of ignote_input_events
         */
void org_westhoffswelt_pdfpresenter_presentation_controller_set_ignore_input_events (orgwesthoffsweltpdfpresenterPresentationController* self, gboolean v) {
	gboolean _tmp0_;
	gboolean _tmp1_;
	g_return_if_fail (self != NULL);
	_tmp0_ = v;
	self->ignore_keyboard_events = _tmp0_;
	_tmp1_ = v;
	self->ignore_mouse_events = _tmp1_;
}


void org_westhoffswelt_pdfpresenter_presentation_controller_set_ignore_mouse_events (orgwesthoffsweltpdfpresenterPresentationController* self, gboolean v) {
	gboolean _tmp0_;
	g_return_if_fail (self != NULL);
	_tmp0_ = v;
	self->ignore_mouse_events = _tmp0_;
}


/**
         * Register a new Controllable instance on this controller. 
         *
         * On success true is returned, in case the controllable has already been
         * registered false is returned.
         */
gboolean org_westhoffswelt_pdfpresenter_presentation_controller_register_controllable (orgwesthoffsweltpdfpresenterPresentationController* self, orgwesthoffsweltpdfpresenterControllable* controllable) {
	gboolean result = FALSE;
	GList* _tmp0_;
	orgwesthoffsweltpdfpresenterControllable* _tmp1_;
	GList* _tmp2_ = NULL;
	orgwesthoffsweltpdfpresenterControllable* _tmp3_;
	orgwesthoffsweltpdfpresenterControllable* _tmp4_;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (controllable != NULL, FALSE);
	_tmp0_ = self->controllables;
	_tmp1_ = controllable;
	_tmp2_ = g_list_find (_tmp0_, _tmp1_);
	if (_tmp2_ != NULL) {
		result = FALSE;
		return result;
	}
	_tmp3_ = controllable;
	_tmp4_ = _g_object_ref0 (_tmp3_);
	self->controllables = g_list_append (self->controllables, _tmp4_);
	result = TRUE;
	return result;
}


/**
         * Go to the next slide
         */
void org_westhoffswelt_pdfpresenter_presentation_controller_next_page (orgwesthoffsweltpdfpresenterPresentationController* self) {
	gint _tmp0_;
	gint _tmp1_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->current_slide_number;
	_tmp1_ = self->n_slides;
	if (_tmp0_ < (_tmp1_ - 1)) {
		gint _tmp2_;
		gint _tmp3_;
		orgwesthoffsweltpdfpresenterMetadataPdf* _tmp4_;
		gint _tmp5_;
		gint _tmp6_ = 0;
		gboolean _tmp8_;
		_tmp2_ = self->current_slide_number;
		self->current_slide_number = _tmp2_ + 1;
		_tmp3_ = self->current_slide_number;
		_tmp4_ = self->metadata;
		_tmp5_ = self->current_user_slide_number;
		_tmp6_ = org_westhoffswelt_pdfpresenter_metadata_pdf_user_slide_to_real_slide (_tmp4_, _tmp5_ + 1);
		if (_tmp3_ == _tmp6_) {
			gint _tmp7_;
			_tmp7_ = self->current_user_slide_number;
			self->current_user_slide_number = _tmp7_ + 1;
		}
		_tmp8_ = self->frozen;
		if (!_tmp8_) {
			self->faded_to_black = FALSE;
		}
		org_westhoffswelt_pdfpresenter_presentation_controller_controllables_update (self);
	} else {
		gboolean _tmp9_ = FALSE;
		gboolean _tmp10_;
		gboolean _tmp12_;
		_tmp10_ = self->black_on_end;
		if (_tmp10_) {
			gboolean _tmp11_ = FALSE;
			_tmp11_ = org_westhoffswelt_pdfpresenter_presentation_controller_is_faded_to_black (self);
			_tmp9_ = !_tmp11_;
		} else {
			_tmp9_ = FALSE;
		}
		_tmp12_ = _tmp9_;
		if (_tmp12_) {
			org_westhoffswelt_pdfpresenter_presentation_controller_fade_to_black (self);
		}
	}
}


/**
         * Go to the next user slide
         */
void org_westhoffswelt_pdfpresenter_presentation_controller_next_user_page (orgwesthoffsweltpdfpresenterPresentationController* self) {
	gboolean needs_update = FALSE;
	gint _tmp0_;
	orgwesthoffsweltpdfpresenterMetadataPdf* _tmp1_;
	gint _tmp2_ = 0;
	gboolean _tmp16_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->current_user_slide_number;
	_tmp1_ = self->metadata;
	_tmp2_ = org_westhoffswelt_pdfpresenter_metadata_pdf_get_user_slide_count (_tmp1_);
	if (_tmp0_ < (_tmp2_ - 1)) {
		gint _tmp3_;
		orgwesthoffsweltpdfpresenterMetadataPdf* _tmp4_;
		gint _tmp5_;
		gint _tmp6_ = 0;
		_tmp3_ = self->current_user_slide_number;
		self->current_user_slide_number = _tmp3_ + 1;
		_tmp4_ = self->metadata;
		_tmp5_ = self->current_user_slide_number;
		_tmp6_ = org_westhoffswelt_pdfpresenter_metadata_pdf_user_slide_to_real_slide (_tmp4_, _tmp5_);
		self->current_slide_number = _tmp6_;
		needs_update = TRUE;
	} else {
		gint _tmp7_;
		gint _tmp8_;
		_tmp7_ = self->current_slide_number;
		_tmp8_ = self->n_slides;
		if (_tmp7_ == (_tmp8_ - 1)) {
			gboolean _tmp9_ = FALSE;
			gboolean _tmp10_;
			gboolean _tmp12_;
			needs_update = FALSE;
			_tmp10_ = self->black_on_end;
			if (_tmp10_) {
				gboolean _tmp11_ = FALSE;
				_tmp11_ = org_westhoffswelt_pdfpresenter_presentation_controller_is_faded_to_black (self);
				_tmp9_ = !_tmp11_;
			} else {
				_tmp9_ = FALSE;
			}
			_tmp12_ = _tmp9_;
			if (_tmp12_) {
				org_westhoffswelt_pdfpresenter_presentation_controller_fade_to_black (self);
			}
		} else {
			orgwesthoffsweltpdfpresenterMetadataPdf* _tmp13_;
			gint _tmp14_ = 0;
			gint _tmp15_;
			_tmp13_ = self->metadata;
			_tmp14_ = org_westhoffswelt_pdfpresenter_metadata_pdf_get_user_slide_count (_tmp13_);
			self->current_user_slide_number = _tmp14_ - 1;
			_tmp15_ = self->n_slides;
			self->current_slide_number = _tmp15_ - 1;
			needs_update = FALSE;
		}
	}
	_tmp16_ = needs_update;
	if (_tmp16_) {
		gboolean _tmp17_;
		_tmp17_ = self->frozen;
		if (!_tmp17_) {
			self->faded_to_black = FALSE;
		}
		org_westhoffswelt_pdfpresenter_presentation_controller_controllables_update (self);
	}
}


/**
         * Go to the previous slide
         */
void org_westhoffswelt_pdfpresenter_presentation_controller_previous_page (orgwesthoffsweltpdfpresenterPresentationController* self) {
	gint _tmp0_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->current_slide_number;
	if (_tmp0_ > 0) {
		gint _tmp1_;
		orgwesthoffsweltpdfpresenterMetadataPdf* _tmp2_;
		gint _tmp3_;
		gint _tmp4_ = 0;
		gboolean _tmp10_;
		_tmp1_ = self->current_slide_number;
		_tmp2_ = self->metadata;
		_tmp3_ = self->current_user_slide_number;
		_tmp4_ = org_westhoffswelt_pdfpresenter_metadata_pdf_user_slide_to_real_slide (_tmp2_, _tmp3_);
		if (_tmp1_ != _tmp4_) {
			gint _tmp5_;
			_tmp5_ = self->current_slide_number;
			self->current_slide_number = _tmp5_ - 1;
		} else {
			gint _tmp6_;
			orgwesthoffsweltpdfpresenterMetadataPdf* _tmp7_;
			gint _tmp8_;
			gint _tmp9_ = 0;
			_tmp6_ = self->current_user_slide_number;
			self->current_user_slide_number = _tmp6_ - 1;
			_tmp7_ = self->metadata;
			_tmp8_ = self->current_user_slide_number;
			_tmp9_ = org_westhoffswelt_pdfpresenter_metadata_pdf_user_slide_to_real_slide (_tmp7_, _tmp8_);
			self->current_slide_number = _tmp9_;
		}
		_tmp10_ = self->frozen;
		if (!_tmp10_) {
			self->faded_to_black = FALSE;
		}
		org_westhoffswelt_pdfpresenter_presentation_controller_controllables_update (self);
	}
}


/**
         * Go to the previous user slide
         */
void org_westhoffswelt_pdfpresenter_presentation_controller_previous_user_page (orgwesthoffsweltpdfpresenterPresentationController* self) {
	gint _tmp0_;
	gboolean _tmp5_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->current_user_slide_number;
	if (_tmp0_ > 0) {
		gint _tmp1_;
		orgwesthoffsweltpdfpresenterMetadataPdf* _tmp2_;
		gint _tmp3_;
		gint _tmp4_ = 0;
		_tmp1_ = self->current_user_slide_number;
		self->current_user_slide_number = _tmp1_ - 1;
		_tmp2_ = self->metadata;
		_tmp3_ = self->current_user_slide_number;
		_tmp4_ = org_westhoffswelt_pdfpresenter_metadata_pdf_user_slide_to_real_slide (_tmp2_, _tmp3_);
		self->current_slide_number = _tmp4_;
	} else {
		self->current_user_slide_number = 0;
		self->current_slide_number = 0;
	}
	_tmp5_ = self->frozen;
	if (!_tmp5_) {
		self->faded_to_black = FALSE;
	}
	org_westhoffswelt_pdfpresenter_presentation_controller_controllables_update (self);
}


/**
         * Go to the first slide
         */
void org_westhoffswelt_pdfpresenter_presentation_controller_goto_first (orgwesthoffsweltpdfpresenterPresentationController* self) {
	gint _tmp0_;
	gboolean _tmp1_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->current_slide_number;
	if (_tmp0_ != 0) {
		org_westhoffswelt_pdfpresenter_presentation_controller_slide2history (self);
	}
	self->current_slide_number = 0;
	self->current_user_slide_number = 0;
	_tmp1_ = self->frozen;
	if (!_tmp1_) {
		self->faded_to_black = FALSE;
	}
	org_westhoffswelt_pdfpresenter_presentation_controller_controllables_update (self);
}


/**
         * Go to the last slide
         */
void org_westhoffswelt_pdfpresenter_presentation_controller_goto_last (orgwesthoffsweltpdfpresenterPresentationController* self) {
	gint _tmp0_;
	orgwesthoffsweltpdfpresenterMetadataPdf* _tmp1_;
	gint _tmp2_ = 0;
	orgwesthoffsweltpdfpresenterMetadataPdf* _tmp3_;
	gint _tmp4_ = 0;
	orgwesthoffsweltpdfpresenterMetadataPdf* _tmp5_;
	gint _tmp6_;
	gint _tmp7_ = 0;
	gboolean _tmp8_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->current_user_slide_number;
	_tmp1_ = self->metadata;
	_tmp2_ = org_westhoffswelt_pdfpresenter_metadata_pdf_get_end_user_slide (_tmp1_);
	if (_tmp0_ != (_tmp2_ - 1)) {
		org_westhoffswelt_pdfpresenter_presentation_controller_slide2history (self);
	}
	_tmp3_ = self->metadata;
	_tmp4_ = org_westhoffswelt_pdfpresenter_metadata_pdf_get_end_user_slide (_tmp3_);
	self->current_user_slide_number = _tmp4_ - 1;
	_tmp5_ = self->metadata;
	_tmp6_ = self->current_user_slide_number;
	_tmp7_ = org_westhoffswelt_pdfpresenter_metadata_pdf_user_slide_to_real_slide (_tmp5_, _tmp6_);
	self->current_slide_number = _tmp7_;
	_tmp8_ = self->frozen;
	if (!_tmp8_) {
		self->faded_to_black = FALSE;
	}
	org_westhoffswelt_pdfpresenter_presentation_controller_controllables_update (self);
}


/**
         * Jump 10 (user) slides forward
         */
void org_westhoffswelt_pdfpresenter_presentation_controller_jump10 (orgwesthoffsweltpdfpresenterPresentationController* self) {
	gint _tmp0_;
	orgwesthoffsweltpdfpresenterMetadataPdf* _tmp1_;
	gint _tmp2_ = 0;
	gint max_user_slide;
	gint _tmp3_;
	gint _tmp4_;
	orgwesthoffsweltpdfpresenterMetadataPdf* _tmp6_;
	gint _tmp7_;
	gint _tmp8_ = 0;
	gboolean _tmp9_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->current_user_slide_number;
	self->current_user_slide_number = _tmp0_ + 10;
	_tmp1_ = self->metadata;
	_tmp2_ = org_westhoffswelt_pdfpresenter_metadata_pdf_get_user_slide_count (_tmp1_);
	max_user_slide = _tmp2_;
	_tmp3_ = self->current_user_slide_number;
	_tmp4_ = max_user_slide;
	if (_tmp3_ >= _tmp4_) {
		gint _tmp5_;
		_tmp5_ = max_user_slide;
		self->current_user_slide_number = _tmp5_ - 1;
	}
	_tmp6_ = self->metadata;
	_tmp7_ = self->current_user_slide_number;
	_tmp8_ = org_westhoffswelt_pdfpresenter_metadata_pdf_user_slide_to_real_slide (_tmp6_, _tmp7_);
	self->current_slide_number = _tmp8_;
	_tmp9_ = self->frozen;
	if (!_tmp9_) {
		self->faded_to_black = FALSE;
	}
	org_westhoffswelt_pdfpresenter_presentation_controller_controllables_update (self);
}


/**
         * Jump 10 (user) slides backward
         */
void org_westhoffswelt_pdfpresenter_presentation_controller_back10 (orgwesthoffsweltpdfpresenterPresentationController* self) {
	gint _tmp0_;
	gint _tmp1_;
	orgwesthoffsweltpdfpresenterMetadataPdf* _tmp2_;
	gint _tmp3_;
	gint _tmp4_ = 0;
	gboolean _tmp5_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->current_user_slide_number;
	self->current_user_slide_number = _tmp0_ - 10;
	_tmp1_ = self->current_user_slide_number;
	if (_tmp1_ < 0) {
		self->current_user_slide_number = 0;
	}
	_tmp2_ = self->metadata;
	_tmp3_ = self->current_user_slide_number;
	_tmp4_ = org_westhoffswelt_pdfpresenter_metadata_pdf_user_slide_to_real_slide (_tmp2_, _tmp3_);
	self->current_slide_number = _tmp4_;
	_tmp5_ = self->frozen;
	if (!_tmp5_) {
		self->faded_to_black = FALSE;
	}
	org_westhoffswelt_pdfpresenter_presentation_controller_controllables_update (self);
}


/**
         * Goto a slide in user page numbers
         */
void org_westhoffswelt_pdfpresenter_presentation_controller_goto_user_page (orgwesthoffsweltpdfpresenterPresentationController* self, gint page_number) {
	gint _tmp0_;
	gint _tmp1_;
	gint _tmp2_;
	gint destination;
	orgwesthoffsweltpdfpresenterMetadataPdf* _tmp3_;
	gint _tmp4_ = 0;
	gint n_user_slides;
	gint _tmp5_;
	gint _tmp9_;
	orgwesthoffsweltpdfpresenterMetadataPdf* _tmp10_;
	gint _tmp11_;
	gint _tmp12_ = 0;
	gboolean _tmp13_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->current_user_slide_number;
	_tmp1_ = page_number;
	if (_tmp0_ != (_tmp1_ - 1)) {
		org_westhoffswelt_pdfpresenter_presentation_controller_slide2history (self);
	}
	org_westhoffswelt_pdfpresenter_presentation_controller_controllables_hide_overview (self);
	_tmp2_ = page_number;
	destination = _tmp2_ - 1;
	_tmp3_ = self->metadata;
	_tmp4_ = org_westhoffswelt_pdfpresenter_metadata_pdf_get_user_slide_count (_tmp3_);
	n_user_slides = _tmp4_;
	_tmp5_ = page_number;
	if (_tmp5_ < 1) {
		destination = 0;
	} else {
		gint _tmp6_;
		gint _tmp7_;
		_tmp6_ = page_number;
		_tmp7_ = n_user_slides;
		if (_tmp6_ >= _tmp7_) {
			gint _tmp8_;
			_tmp8_ = n_user_slides;
			destination = _tmp8_ - 1;
		}
	}
	_tmp9_ = destination;
	self->current_user_slide_number = _tmp9_;
	_tmp10_ = self->metadata;
	_tmp11_ = self->current_user_slide_number;
	_tmp12_ = org_westhoffswelt_pdfpresenter_metadata_pdf_user_slide_to_real_slide (_tmp10_, _tmp11_);
	self->current_slide_number = _tmp12_;
	_tmp13_ = self->frozen;
	if (!_tmp13_) {
		self->faded_to_black = FALSE;
	}
	org_westhoffswelt_pdfpresenter_presentation_controller_set_ignore_input_events (self, FALSE);
	org_westhoffswelt_pdfpresenter_presentation_controller_controllables_update (self);
}


/**
         * Go back in history
         */
void org_westhoffswelt_pdfpresenter_presentation_controller_history_back (orgwesthoffsweltpdfpresenterPresentationController* self) {
	gint* _tmp0_;
	gint _tmp0__length1;
	gint history_length;
	gint _tmp1_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->history;
	_tmp0__length1 = self->priv->history_length1;
	history_length = _tmp0__length1;
	_tmp1_ = history_length;
	if (_tmp1_ == 0) {
		org_westhoffswelt_pdfpresenter_presentation_controller_goto_first (self);
	} else {
		gint* _tmp2_;
		gint _tmp2__length1;
		gint _tmp3_;
		gint _tmp4_;
		orgwesthoffsweltpdfpresenterMetadataPdf* _tmp5_;
		gint _tmp6_;
		gint _tmp7_ = 0;
		gint _tmp8_;
		gint _tmp9_ = 0;
		gboolean _tmp10_;
		_tmp2_ = self->priv->history;
		_tmp2__length1 = self->priv->history_length1;
		_tmp3_ = history_length;
		_tmp4_ = _tmp2_[_tmp3_ - 1];
		self->current_slide_number = _tmp4_;
		_tmp5_ = self->metadata;
		_tmp6_ = self->current_slide_number;
		_tmp7_ = org_westhoffswelt_pdfpresenter_metadata_pdf_real_slide_to_user_slide (_tmp5_, _tmp6_);
		self->current_user_slide_number = _tmp7_;
		_tmp8_ = history_length;
		_tmp9_ = _tmp8_ - 1;
		self->priv->history = g_renew (gint, self->priv->history, _tmp8_ - 1);
		(_tmp9_ > self->priv->history_length1) ? memset (self->priv->history + self->priv->history_length1, 0, sizeof (gint) * (_tmp9_ - self->priv->history_length1)) : NULL;
		self->priv->history_length1 = _tmp9_;
		self->priv->_history_size_ = _tmp9_;
		_tmp10_ = self->frozen;
		if (!_tmp10_) {
			self->faded_to_black = FALSE;
		}
		org_westhoffswelt_pdfpresenter_presentation_controller_controllables_update (self);
	}
}


/**
         * Notify the controllables that they have to update the view
         */
void org_westhoffswelt_pdfpresenter_presentation_controller_controllables_update (orgwesthoffsweltpdfpresenterPresentationController* self) {
	GList* _tmp0_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->controllables;
	{
		GList* c_collection = NULL;
		GList* c_it = NULL;
		c_collection = _tmp0_;
		for (c_it = c_collection; c_it != NULL; c_it = c_it->next) {
			orgwesthoffsweltpdfpresenterControllable* _tmp1_;
			orgwesthoffsweltpdfpresenterControllable* c = NULL;
			_tmp1_ = _g_object_ref0 ((orgwesthoffsweltpdfpresenterControllable*) c_it->data);
			c = _tmp1_;
			{
				orgwesthoffsweltpdfpresenterControllable* _tmp2_;
				_tmp2_ = c;
				org_westhoffswelt_pdfpresenter_controllable_update (_tmp2_);
				_g_object_unref0 (c);
			}
		}
	}
}


/**
         * Reset all registered controllables to their initial state
         */
void org_westhoffswelt_pdfpresenter_presentation_controller_controllables_reset (orgwesthoffsweltpdfpresenterPresentationController* self) {
	g_return_if_fail (self != NULL);
	self->current_slide_number = 0;
	self->current_user_slide_number = 0;
	org_westhoffswelt_pdfpresenter_presentation_controller_controllables_update (self);
	org_westhoffswelt_pdfpresenter_presentation_controller_reset_timer (self);
}


void org_westhoffswelt_pdfpresenter_presentation_controller_controllables_show_overview (orgwesthoffsweltpdfpresenterPresentationController* self) {
	GList* _tmp0_;
	g_return_if_fail (self != NULL);
	org_westhoffswelt_pdfpresenter_presentation_controller_set_ignore_mouse_events (self, TRUE);
	self->priv->current_key_mapping = ORG_WESTHOFFSWELT_PDFPRESENTER_PRESENTATION_CONTROLLER_KEY_MAPPINGS_Overview;
	_tmp0_ = self->controllables;
	{
		GList* c_collection = NULL;
		GList* c_it = NULL;
		c_collection = _tmp0_;
		for (c_it = c_collection; c_it != NULL; c_it = c_it->next) {
			orgwesthoffsweltpdfpresenterControllable* _tmp1_;
			orgwesthoffsweltpdfpresenterControllable* c = NULL;
			_tmp1_ = _g_object_ref0 ((orgwesthoffsweltpdfpresenterControllable*) c_it->data);
			c = _tmp1_;
			{
				orgwesthoffsweltpdfpresenterControllable* _tmp2_;
				_tmp2_ = c;
				org_westhoffswelt_pdfpresenter_controllable_show_overview (_tmp2_);
				_g_object_unref0 (c);
			}
		}
	}
}


void org_westhoffswelt_pdfpresenter_presentation_controller_controllables_hide_overview (orgwesthoffsweltpdfpresenterPresentationController* self) {
	gint _tmp0_;
	gint _tmp1_ = 0;
	g_return_if_fail (self != NULL);
	org_westhoffswelt_pdfpresenter_presentation_controller_set_ignore_mouse_events (self, FALSE);
	self->priv->current_key_mapping = ORG_WESTHOFFSWELT_PDFPRESENTER_PRESENTATION_CONTROLLER_KEY_MAPPINGS_Normal;
	_tmp0_ = self->current_user_slide_number;
	_tmp1_ = org_westhoffswelt_pdfpresenter_presentation_controller_get_user_n_slides (self);
	if (_tmp0_ >= _tmp1_) {
		org_westhoffswelt_pdfpresenter_presentation_controller_goto_last (self);
	}
	org_westhoffswelt_pdfpresenter_presentation_controller_controllables_update (self);
}


/**
         * Fill the presentation display with black
         */
void org_westhoffswelt_pdfpresenter_presentation_controller_fade_to_black (orgwesthoffsweltpdfpresenterPresentationController* self) {
	gboolean _tmp0_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->faded_to_black;
	self->faded_to_black = !_tmp0_;
	org_westhoffswelt_pdfpresenter_presentation_controller_controllables_update (self);
}


/**
         * Is the presentation blanked?
         */
gboolean org_westhoffswelt_pdfpresenter_presentation_controller_is_faded_to_black (orgwesthoffsweltpdfpresenterPresentationController* self) {
	gboolean result = FALSE;
	gboolean _tmp0_;
	g_return_val_if_fail (self != NULL, FALSE);
	_tmp0_ = self->faded_to_black;
	result = _tmp0_;
	return result;
}


/**
         * Edit note for current slide.
         */
void org_westhoffswelt_pdfpresenter_presentation_controller_controllables_edit_note (orgwesthoffsweltpdfpresenterPresentationController* self) {
	GList* _tmp0_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->controllables;
	{
		GList* c_collection = NULL;
		GList* c_it = NULL;
		c_collection = _tmp0_;
		for (c_it = c_collection; c_it != NULL; c_it = c_it->next) {
			orgwesthoffsweltpdfpresenterControllable* _tmp1_;
			orgwesthoffsweltpdfpresenterControllable* c = NULL;
			_tmp1_ = _g_object_ref0 ((orgwesthoffsweltpdfpresenterControllable*) c_it->data);
			c = _tmp1_;
			{
				orgwesthoffsweltpdfpresenterControllable* _tmp2_;
				_tmp2_ = c;
				org_westhoffswelt_pdfpresenter_controllable_edit_note (_tmp2_);
				_g_object_unref0 (c);
			}
		}
	}
}


/**
         * Ask for the page to jump to
         */
void org_westhoffswelt_pdfpresenter_presentation_controller_controllables_ask_goto_page (orgwesthoffsweltpdfpresenterPresentationController* self) {
	GList* _tmp0_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->controllables;
	{
		GList* c_collection = NULL;
		GList* c_it = NULL;
		c_collection = _tmp0_;
		for (c_it = c_collection; c_it != NULL; c_it = c_it->next) {
			orgwesthoffsweltpdfpresenterControllable* _tmp1_;
			orgwesthoffsweltpdfpresenterControllable* c = NULL;
			_tmp1_ = _g_object_ref0 ((orgwesthoffsweltpdfpresenterControllable*) c_it->data);
			c = _tmp1_;
			{
				orgwesthoffsweltpdfpresenterControllable* _tmp2_;
				_tmp2_ = c;
				org_westhoffswelt_pdfpresenter_controllable_ask_goto_page (_tmp2_);
				_g_object_unref0 (c);
			}
		}
	}
}


/**
         * Freeze the display
         */
void org_westhoffswelt_pdfpresenter_presentation_controller_toggle_freeze (orgwesthoffsweltpdfpresenterPresentationController* self) {
	gboolean _tmp0_;
	gboolean _tmp1_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->frozen;
	self->frozen = !_tmp0_;
	_tmp1_ = self->frozen;
	if (!_tmp1_) {
		self->faded_to_black = FALSE;
	}
	org_westhoffswelt_pdfpresenter_presentation_controller_controllables_update (self);
}


/**
         * Is the presentation frozen?
         */
gboolean org_westhoffswelt_pdfpresenter_presentation_controller_is_frozen (orgwesthoffsweltpdfpresenterPresentationController* self) {
	gboolean result = FALSE;
	gboolean _tmp0_;
	g_return_val_if_fail (self != NULL, FALSE);
	_tmp0_ = self->frozen;
	result = _tmp0_;
	return result;
}


/**
         * Toggle skip for current slide
         */
void org_westhoffswelt_pdfpresenter_presentation_controller_toggle_skip (orgwesthoffsweltpdfpresenterPresentationController* self) {
	gint _tmp0_;
	orgwesthoffsweltpdfpresenterMetadataPdf* _tmp1_;
	gint _tmp2_;
	gint _tmp3_;
	gint _tmp4_ = 0;
	orgwesthoffsweltpdfpresenterWindowOverview* _tmp5_;
	gint _tmp6_ = 0;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->current_user_slide_number;
	_tmp1_ = self->metadata;
	_tmp2_ = self->current_slide_number;
	_tmp3_ = self->current_user_slide_number;
	_tmp4_ = org_westhoffswelt_pdfpresenter_metadata_pdf_toggle_skip (_tmp1_, _tmp2_, _tmp3_);
	self->current_user_slide_number = _tmp0_ + _tmp4_;
	_tmp5_ = self->overview;
	_tmp6_ = org_westhoffswelt_pdfpresenter_presentation_controller_get_user_n_slides (self);
	org_westhoffswelt_pdfpresenter_window_overview_set_n_slides (_tmp5_, _tmp6_);
	org_westhoffswelt_pdfpresenter_presentation_controller_controllables_update (self);
}


/**
         * Toggle skip for current slide in overview mode
         */
void org_westhoffswelt_pdfpresenter_presentation_controller_toggle_skip_overview (orgwesthoffsweltpdfpresenterPresentationController* self) {
	orgwesthoffsweltpdfpresenterWindowOverview* _tmp0_;
	gint _tmp1_ = 0;
	gint user_selected;
	orgwesthoffsweltpdfpresenterMetadataPdf* _tmp2_;
	gint _tmp3_ = 0;
	gint slide_number;
	orgwesthoffsweltpdfpresenterMetadataPdf* _tmp4_;
	orgwesthoffsweltpdfpresenterWindowOverview* _tmp5_;
	gint _tmp6_ = 0;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->overview;
	_tmp1_ = org_westhoffswelt_pdfpresenter_window_overview_get_current_button (_tmp0_);
	user_selected = _tmp1_;
	_tmp2_ = self->metadata;
	_tmp3_ = org_westhoffswelt_pdfpresenter_metadata_pdf_user_slide_to_real_slide (_tmp2_, user_selected);
	slide_number = _tmp3_;
	_tmp4_ = self->metadata;
	org_westhoffswelt_pdfpresenter_metadata_pdf_toggle_skip (_tmp4_, slide_number, user_selected);
	_tmp5_ = self->overview;
	_tmp6_ = org_westhoffswelt_pdfpresenter_presentation_controller_get_user_n_slides (self);
	org_westhoffswelt_pdfpresenter_window_overview_set_n_slides (_tmp5_, _tmp6_);
}


/**
         * Start the presentation (-> timer)
         */
void org_westhoffswelt_pdfpresenter_presentation_controller_start (orgwesthoffsweltpdfpresenterPresentationController* self) {
	g_return_if_fail (self != NULL);
	org_westhoffswelt_pdfpresenter_presentation_controller_controllables_update (self);
}


/**
         * Pause the timer
         */
void org_westhoffswelt_pdfpresenter_presentation_controller_toggle_pause (orgwesthoffsweltpdfpresenterPresentationController* self) {
	GList* _tmp0_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->controllables;
	{
		GList* c_collection = NULL;
		GList* c_it = NULL;
		c_collection = _tmp0_;
		for (c_it = c_collection; c_it != NULL; c_it = c_it->next) {
			orgwesthoffsweltpdfpresenterControllable* _tmp1_;
			orgwesthoffsweltpdfpresenterControllable* c = NULL;
			_tmp1_ = _g_object_ref0 ((orgwesthoffsweltpdfpresenterControllable*) c_it->data);
			c = _tmp1_;
			{
				orgwesthoffsweltpdfpresenterControllable* _tmp2_;
				_tmp2_ = c;
				org_westhoffswelt_pdfpresenter_controllable_toggle_pause (_tmp2_);
				_g_object_unref0 (c);
			}
		}
	}
}


/**
         * Reset the timer
         */
void org_westhoffswelt_pdfpresenter_presentation_controller_reset_timer (orgwesthoffsweltpdfpresenterPresentationController* self) {
	GList* _tmp0_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->controllables;
	{
		GList* c_collection = NULL;
		GList* c_it = NULL;
		c_collection = _tmp0_;
		for (c_it = c_collection; c_it != NULL; c_it = c_it->next) {
			orgwesthoffsweltpdfpresenterControllable* _tmp1_;
			orgwesthoffsweltpdfpresenterControllable* c = NULL;
			_tmp1_ = _g_object_ref0 ((orgwesthoffsweltpdfpresenterControllable*) c_it->data);
			c = _tmp1_;
			{
				orgwesthoffsweltpdfpresenterControllable* _tmp2_;
				_tmp2_ = c;
				org_westhoffswelt_pdfpresenter_controllable_reset_timer (_tmp2_);
				_g_object_unref0 (c);
			}
		}
	}
}


static void org_westhoffswelt_pdfpresenter_presentation_controller_class_init (orgwesthoffsweltpdfpresenterPresentationControllerClass * klass) {
	org_westhoffswelt_pdfpresenter_presentation_controller_parent_class = g_type_class_peek_parent (klass);
	g_type_class_add_private (klass, sizeof (orgwesthoffsweltpdfpresenterPresentationControllerPrivate));
	G_OBJECT_CLASS (klass)->finalize = org_westhoffswelt_pdfpresenter_presentation_controller_finalize;
}


static void org_westhoffswelt_pdfpresenter_presentation_controller_instance_init (orgwesthoffsweltpdfpresenterPresentationController * self) {
	self->priv = ORG_WESTHOFFSWELT_PDFPRESENTER_PRESENTATION_CONTROLLER_GET_PRIVATE (self);
	self->faded_to_black = FALSE;
	self->frozen = FALSE;
	self->ignore_keyboard_events = FALSE;
	self->ignore_mouse_events = FALSE;
	self->last_key_event = (guint) 0;
	self->priv->current_key_mapping = ORG_WESTHOFFSWELT_PDFPRESENTER_PRESENTATION_CONTROLLER_KEY_MAPPINGS_Normal;
}


static void org_westhoffswelt_pdfpresenter_presentation_controller_finalize (GObject* obj) {
	orgwesthoffsweltpdfpresenterPresentationController * self;
	self = ORG_WESTHOFFSWELT_PDFPRESENTER_PRESENTATION_CONTROLLER (obj);
	__g_list_free__g_object_unref0_0 (self->controllables);
	_g_object_unref0 (self->metadata);
	_g_object_unref0 (self->overview);
	self->priv->history = (g_free (self->priv->history), NULL);
	G_OBJECT_CLASS (org_westhoffswelt_pdfpresenter_presentation_controller_parent_class)->finalize (obj);
}


/**
     * Controller handling all the triggered events/signals
     */
GType org_westhoffswelt_pdfpresenter_presentation_controller_get_type (void) {
	static volatile gsize org_westhoffswelt_pdfpresenter_presentation_controller_type_id__volatile = 0;
	if (g_once_init_enter (&org_westhoffswelt_pdfpresenter_presentation_controller_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (orgwesthoffsweltpdfpresenterPresentationControllerClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) org_westhoffswelt_pdfpresenter_presentation_controller_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (orgwesthoffsweltpdfpresenterPresentationController), 0, (GInstanceInitFunc) org_westhoffswelt_pdfpresenter_presentation_controller_instance_init, NULL };
		GType org_westhoffswelt_pdfpresenter_presentation_controller_type_id;
		org_westhoffswelt_pdfpresenter_presentation_controller_type_id = g_type_register_static (G_TYPE_OBJECT, "orgwesthoffsweltpdfpresenterPresentationController", &g_define_type_info, 0);
		g_once_init_leave (&org_westhoffswelt_pdfpresenter_presentation_controller_type_id__volatile, org_westhoffswelt_pdfpresenter_presentation_controller_type_id);
	}
	return org_westhoffswelt_pdfpresenter_presentation_controller_type_id__volatile;
}



