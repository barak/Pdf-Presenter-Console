From: =?utf-8?q?Jeremy_B=C3=ADcha?= <jeremy.bicha@canonical.com>
Date: Wed, 21 Jun 2023 11:01:56 -0400
Subject: Switch to webkit 4.1

webkit2gtk 4.1 (and Debian's librest) uses libsoup3

Also, disable the keyboard shortcut for qrencode since
that feature hasn't been ported to libsoup3 yet

https://github.com/pdfpc/pdfpc/issues/664
---
 README.rst         | 4 ++--
 rc/pdfpcrc         | 2 +-
 src/CMakeLists.txt | 4 ++--
 3 files changed, 5 insertions(+), 5 deletions(-)

diff --git a/README.rst b/README.rst
index 1cc0017..4b8eafb 100644
--- a/README.rst
+++ b/README.rst
@@ -110,11 +110,11 @@ In order to compile and run pdfpc, the following requirements need to be met:
 - libsoup
 - libqrencode
 
-E.g., on Ubuntu 20.04 onward, you can install these dependencies with::
+E.g., on Ubuntu 22.04 onward, you can install these dependencies with::
 
     sudo apt-get install cmake valac libgee-0.8-dev libpoppler-glib-dev
     libgtk-3-dev libgstreamer1.0-dev libgstreamer-plugins-base1.0-dev
-    libjson-glib-dev libmarkdown2-dev libwebkit2gtk-4.0-dev libsoup2.4-dev
+    libjson-glib-dev libmarkdown2-dev libwebkit2gtk-4.1-dev
     libqrencode-dev gstreamer1.0-gtk3
 
 (the last one is a run-time dependence). You should also consider installing all
diff --git a/rc/pdfpcrc b/rc/pdfpcrc
index 05e11eb..7852526 100644
--- a/rc/pdfpcrc
+++ b/rc/pdfpcrc
@@ -119,7 +119,7 @@ bind d                  toggleDrawings
 bind S+x                executeScript
 
 # Show QR code
-bind Q                  showQRcode
+# bind Q                  showQRcode
 
 # Short help
 bind question           showHelp
diff --git a/src/CMakeLists.txt b/src/CMakeLists.txt
index c2b1549..562aff3 100644
--- a/src/CMakeLists.txt
+++ b/src/CMakeLists.txt
@@ -33,8 +33,8 @@ if (MDVIEW OR REST)
 endif ()
 
 if (MDVIEW)
-    pkg_check_modules(WEBKIT REQUIRED webkit2gtk-4.0)
-    set(MDVIEW_PACKAGES webkit2gtk-4.0)
+    pkg_check_modules(WEBKIT REQUIRED webkit2gtk-4.1)
+    set(MDVIEW_PACKAGES webkit2gtk-4.1)
 endif ()
 
 if (REST)
